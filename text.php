<?php

$CFDI = [
"G01" => "Adquisición de mercancias",
"G02" => "Devoluciones, descuentos o bonificaciones",
"G03" => "Gastos en general",
"I01" => "Construcciones",
"I02" => "Mobilario y equipo de oficina por inversiones",
"I03" => "Equipo de transporte",
"I04" => "Equipo de computo y accesorios",
"I05" => "Dados, troqueles, moldes, matrices y herramental",
"I06" => "Comunicaciones telefónicas",
"I07" => "Comunicaciones satelitales",
"I08" => "Otra maquinaria y equipo",
"D01" => "Honorarios médicos, dentales y gastos hospitalarios.",
"D02" => "Gastos médicos por incapacidad o discapacidad",
"D03" => "Gastos funerales.",
"D04" => "Donativos.",
"D05" => "Intereses reales efectivamente pagados por créditos hipotecarios (casa habitación).",
"D06" => "Aportaciones voluntarias al SAR.",
"D07" => "Primas por seguros de gastos médicos.",
"D08" => "Gastos de transportación escolar obligatoria.",
"D09" => "Depósitos en cuentas para el ahorro, primas que tengan como base planes de pensiones.",
"D10" => "Pagos por servicios educativos (colegiaturas)",
"P01" => "Por definir"
    
];
    
$EfectoComprobante = [
    
"I" =>	"Ingreso",
"E" =>	"Egreso",
"T" =>	"Traslado",
"N" =>	"Nómina	",
"P" =>	"Pago",
  
];    


$TipoRegimenFiscal = [
"601" => "General de Ley Personas Morales",
"603" => "Personas Morales con Fines no Lucrativos",
"605" => "Sueldos y Salarios e Ingresos Asimilados a Salarios",
"606" => "Arrendamiento",
"608" => "Demás ingresos",
"609" => "Consolidación",
"610" => "Residentes en el Extranjero sin Establecimiento Permanente en México",
"611" => "Ingresos por Dividendos (socios y accionistas)",
"612" => "Personas Físicas con Actividades Empresariales y Profesionales",
"614" => "Ingresos por intereses",
"616" => "Sin obligaciones fiscales",
"620" => "Sociedades Cooperativas de Producción que optan por diferir sus ingresos",
"621" => "Incorporación Fiscal",
"622" => "Actividades Agrícolas, Ganaderas, Silvícolas y Pesqueras",
"623" => "Opcional para Grupos de Sociedades",
"624" => "Coordinados",
"628" => "Hidrocarburos",
"607" => "Régimen de Enajenación o Adquisición de Bienes",
"629" => "De los Regímenes Fiscales Preferentes y de las Empresas Multinacionales",
"630" => "Enajenación de acciones en bolsa de valores",
"615" => "Régimen de los ingresos por obtención de premios"

];

$TipoClaveUnidad = [
    "hola" => "lel"
];

$TipoMoneda = [
"AED" =>	"Dirham de EAU",
"AFN" =>	"Afghani",
"ALL" =>	"Lek",
"AMD" =>	"Dram armenio",
"ANG" =>	"Florín antillano neerlandés",
"AOA" =>	"Kwanza",
"ARS" =>	"Peso Argentino",
"AUD" =>	"Dólar Australiano",
"AWG" =>	"Aruba Florin",
"AZN" =>	"Azerbaijanian Manat",
"BAM" =>	"Convertibles marca",
"BBD" =>	"Dólar de Barbados",
"BDT" =>	"Taka",
"BGN" =>	"Lev búlgaro",
"BHD" =>	"Dinar de Bahrein",
"BIF" =>	"Burundi Franc",
"BMD" =>	"Dólar de Bermudas",
"BND" =>	"Dólar de Brunei",
"BOB" =>	"Boliviano",
"BOV" =>	"Mvdol",
"BRL" =>	"Real brasileño",
"BSD" =>	"Dólar de las Bahamas",
"BTN" =>	"Ngultrum",
"BWP" =>	"Pula",
"BYR" =>	"Rublo bielorruso",
"BZD" =>	"Dólar de Belice",
"CAD" =>	"Dolar Canadiense",
"CDF" =>	"Franco congoleño",
"CHE" =>	"WIR Euro",
"CHF" =>	"Franco Suizo",
"CHW" =>	"Franc WIR",
"CLF" =>	"Unidad de Fomento",
"CLP" =>	"Peso chileno",
"CNY" =>	"Yuan Renminbi",
"COP" =>	"Peso Colombiano",
"COU" =>	"Unidad de Valor real",
"CRC" =>	"Colón costarricense",
"CUC" =>	"Peso Convertible",
"CUP" =>	"Peso Cubano",
"CVE" =>	"Cabo Verde Escudo",
"CZK" =>	"Corona checa",
"DJF" =>	"Franco de Djibouti",
"DKK" =>	"Corona danesa",
"DOP" =>	"Peso Dominicano",
"DZD" =>	"Dinar argelino",
"EGP" =>	"Libra egipcia",
"ERN" =>	"Nakfa",
"ETB" =>	"Birr etíope",
"EUR" =>	"Euro",
"FJD" =>	"Dólar de Fiji",
"FKP" =>	"Libra malvinense",
"GBP" =>	"Libra Esterlina",
"GEL" =>	"Lari",
"GHS" =>	"Cedi de Ghana",
"GIP" =>	"Libra de Gibraltar",
"GMD" =>	"Dalasi",
"GNF" =>	"Franco guineano",
"GTQ" =>	"Quetzal",
"GYD" =>	"Dólar guyanés",
"HKD" =>	"Dolar De Hong Kong",
"HNL" =>	"Lempira",
"HRK" =>	"Kuna",
"HTG" =>	"Gourde",
"HUF" =>	"Florín",
"IDR" =>	"Rupia",
"ILS" =>	"Nuevo Shekel Israelí",
"INR" =>	"Rupia india",
"IQD" =>	"Dinar iraquí",
"IRR" =>	"Rial iraní",
"ISK" =>	"Corona islandesa",
"JMD" =>	"Dólar Jamaiquino",
"JOD" =>	"Dinar jordano",
"JPY" =>	"Yen",
"KES" =>	"Chelín keniano",
"KGS" =>	"Som",
"KHR" =>	"Riel",
"KMF" =>	"Franco Comoro",
"KPW" =>	"Corea del Norte ganó",
"KRW" =>	"Won",
"KWD" =>	"Dinar kuwaití",
"KYD" =>	"Dólar de las Islas Caimán",
"KZT" =>	"Tenge",
"LAK" =>	"Kip",
"LBP" =>	"Libra libanesa",
"LKR" =>	"Rupia de Sri Lanka",
"LRD" =>	"Dólar liberiano",
"LSL" =>	"Loti",
"LYD" =>	"Dinar libio",
"MAD" =>	"Dirham marroquí",
"MDL" =>	"Leu moldavo",
"MGA" =>	"Ariary malgache",
"MKD" =>	"Denar",
"MMK" =>	"Kyat",
"MNT" =>	"Tugrik",
"MOP" =>	"Pataca",
"MRO" =>	"Ouguiya",
"MUR" =>	"Rupia de Mauricio",
"MVR" =>	"Rupia",
"MWK" =>	"Kwacha",
"MXN" =>	"Peso Mexicano",
"MXV" =>	"México Unidad de Inversión (UDI)",
"MYR" =>	"Ringgit malayo",
"MZN" =>	"Mozambique Metical",
"NAD" =>	"Dólar de Namibia",
"NGN" =>	"Naira",
"NIO" =>	"Córdoba Oro",
"NOK" =>	"Corona noruega",
"NPR" =>	"Rupia nepalí",
"NZD" =>	"Dólar de Nueva Zelanda",
"OMR" =>	"Rial omaní",
"PAB" =>	"Balboa",
"PEN" =>	"Nuevo Sol",
"PGK" =>	"Kina",
"PHP" =>	"Peso filipino",
"PKR" =>	"Rupia de Pakistán",
"PLN" =>	"Zloty",
"PYG" =>	"Guaraní",
"QAR" =>	"Qatar Rial",
"RON" =>	"Leu rumano",
"RSD" =>	"Dinar serbio",
"RUB" =>	"Rublo ruso",
"RWF" =>	"Franco ruandés",
"SAR" =>	"Riyal saudí",
"SBD" =>	"Dólar de las Islas Salomón",
"SCR" =>	"Rupia de Seychelles",
"SDG" =>	"Libra sudanesa",
"SEK" =>	"Corona sueca",
"SGD" =>	"Dolar De Singapur",
"SHP" =>	"Libra de Santa Helena",
"SLL" =>	"Leona",
"SOS" =>	"Chelín somalí",
"SRD" =>	"Dólar de Suriname",
"SSP" =>	"Libra sudanesa Sur",
"STD" =>	"Dobra",
"SVC" =>	"Colon El Salvador",
"SYP" =>	"Libra Siria",
"SZL" =>	"Lilangeni",
"THB" =>	"Baht",
"TJS" =>	"Somoni",
"TMT" =>	"Turkmenistán nuevo manat",
"TND" =>	"Dinar tunecino",
"TOP" =>	"Paanga",
"TRY" =>	"Lira turca",
"TTD" =>	"Dólar de Trinidad y Tobago",
"TWD" =>	"Nuevo dólar de Taiwán",
"TZS" =>	"Shilling tanzano",
"UAH" =>	"Hryvnia",
"UGX" =>	"Shilling de Uganda",
"USD" =>	"Dolar americano",
"USN" =>	"Dólar estadounidense (día siguiente)",
"UYI" =>	"Peso Uruguay en Unidades Indexadas (URUIURUI)",
"UYU" =>	"Peso Uruguayo",
"UZS" =>	"Uzbekistán Sum",
"VEF" =>	"Bolívar",
"VND" =>	"Dong",
"VUV" =>	"Vatu",
"WST" =>	"Tala",
"XAF" =>	"Franco CFA BEAC",
"XAG" =>	"Plata",
"XAU" =>	"Oro",
"XBA" =>	"Unidad de Mercados de Bonos Unidad Europea Composite (EURCO)",
"XBB" =>	"Unidad Monetaria de Bonos de Mercados Unidad Europea (UEM-6)",
"XBC" =>	"Mercados de Bonos Unidad Europea unidad de cuenta a 9 (UCE-9)",
"XBD" =>	"Mercados de Bonos Unidad Europea unidad de cuenta a 17 (UCE-17)",
"XCD" =>	"Dólar del Caribe Oriental",
"XDR" =>	"DEG (Derechos Especiales de Giro)",
"XOF" =>	"Franco CFA BCEAO",
"XPD" =>	"Paladio",
"XPF" =>	"Franco CFP",
"XPT" =>	"Platino",
"XSU" =>	"Sucre",
"XTS" =>	"Códigos reservados específicamente para propósitos de prueba",
"XUA" =>	"Unidad ADB de Cuenta",
"XXX" =>	"Los códigos asignados para las transacciones en que intervenga ninguna moneda",
"YER" =>	"Rial yemení",
"ZAR" =>	"Rand",
"ZMW" =>	"Kwacha zambiano",
"ZWL" =>	"Zimbabwe Dólar"
  
];


$TipoFormaPago = [
"01" =>	"Efectivo",
"02" =>	"Cheque nominativo",
"03" =>	"Transferencia electrónica de fondos (incluye SPEI)",
"04" =>	"Tarjeta de crédito",
"05" =>	"Monedero electrónico",
"06" =>	"Dinero electrónico",
"08" =>	"Vales de despensa",
"12" =>	"Dación en pago",
"13" =>	"Pago por subrogación",
"14" =>	"Pago por consignación",
"15" =>	"Condonación",
"17" =>	"Compensación",
"23" =>	"Novación",
"24" =>	"Confusión",
"25" =>	"Remisión de deuda",
"26" =>	"Prescripción o caducidad",
"27" =>	"A satisfacción del acreedor",
"28" =>	"Tarjeta de débito",
"29" =>	"Tarjeta de servicios",
"30" =>	"Aplicación de anticipos",
"31" =>	"Intermediario pagos",
"99" =>	"Por definir"
];

$TipoImpuesto =[
 "001" =>	"ISR",
 "002" =>	"IVA",
 "003" =>	"IEPS"
];
$TipoMetodoPago=[
   "PUE" =>	"Pago en una sola exhibición",
   "PPD" =>	"Pago en parcialidades o diferido"

];


$xml = simplexml_load_file('001.xml'); 
$ns = $xml->getNamespaces(true);
$xml->registerXPathNamespace('c', $ns['cfdi']);
$xml->registerXPathNamespace('t', $ns['tfd']);
 
 
//EMPIEZO A LEER LA INFORMACION DEL CFDI E IMPRIMIRLA 
foreach ($xml->xpath('//cfdi:Comprobante') as $cfdiComprobante){ 
     // echo $cfdiComprobante['LugarExpedicion']; 
      
     $MetodoPago = $cfdiComprobante['MetodoPago']; 
      
     $TipoComprobante = $cfdiComprobante['TipoDeComprobante']; 
      
     $Total = $cfdiComprobante['Total']; 
      
     $Moneda = $cfdiComprobante['Moneda']; 
      
     // echo $cfdiComprobante['Certificado']; 
      
    $SubTotal = $cfdiComprobante['SubTotal']; 
      
    $NoCertificado = $cfdiComprobante['NoCertificado']; 
      
     $FormaPago = $cfdiComprobante['FormaPago']; 
      
     // echo $cfdiComprobante['Sello']; 
      
     $Fecha = $cfdiComprobante['Fecha']; 
      
     $Folio = $cfdiComprobante['Folio']; 
      
} 
foreach ($xml->xpath('//cfdi:Comprobante//cfdi:Emisor') as $Emisor){ 
  $RFCemisor = $Emisor['Rfc']; 
   
  $NombreEmisor = $Emisor['Nombre']; 
   
  $RegimenFiscal = $Emisor['RegimenFiscal']; 
   
} 
foreach ($xml->xpath('//cfdi:Comprobante//cfdi:Receptor') as $Receptor){ 
  $RFCreceptor = $Receptor['Rfc']; 
   
  $NombreReceptor = $Receptor['Nombre']; 
   
  $UsoCFDI = $Receptor['UsoCFDI']; 
   
} 
foreach ($xml->xpath('//cfdi:Comprobante//cfdi:Conceptos//cfdi:Concepto') as $DomicilioFiscal){ 
  $ClaveProdServ = $DomicilioFiscal['ClaveProdServ']; 
   
  $Cantidad= $DomicilioFiscal['Cantidad']; 
   
  $ClaveUnidad = $DomicilioFiscal['ClaveUnidad']; 
   
  $DomDesc = $DomicilioFiscal['Descripcion']; 
   
  $ValorUnitario =  $DomicilioFiscal['ValorUnitario']; 
   
  $Importe= $DomicilioFiscal['Importe'];    
} 
foreach ($xml->xpath('//cfdi:Comprobante//cfdi:Conceptos//cfdi:Concepto//cfdi:Impuestos//cfdi:Traslados//cfdi:Traslado') as $DomicilioFiscal){ 
  // echo $DomicilioFiscal['Base']; 
   
  $Impuesto = $DomicilioFiscal['Impuesto']; 
   
  $TipoFactor = $DomicilioFiscal['TipoFactor']; 
   
  $TasaOCuota = $DomicilioFiscal['TasaOCuota']; 
   
  $ImporteTraslado = $DomicilioFiscal['Importe']; 
   
} 
foreach ($xml->xpath('//t:TimbreFiscalDigital') as $ExpedidoEn){ 
  $UUID = $ExpedidoEn['UUID']; 
   
 $FechaTimbrado = $ExpedidoEn['FechaTimbrado']; 
   
  $RfcProvCertif = $ExpedidoEn['RfcProvCertif']; 
   
  $SelloCFD = $ExpedidoEn['SelloCFD']; 
  $Version  = $ExpedidoEn['Version'];
   
  $NoCertificadoSAT=  $ExpedidoEn['NoCertificadoSAT']; 
   
  $SelloSAT=  $ExpedidoEn['SelloSAT']; 
  
} 
 
?>